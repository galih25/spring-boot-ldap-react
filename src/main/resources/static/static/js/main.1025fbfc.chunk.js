(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,t,r){e.exports=r(78)},52:function(e,t,r){},53:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"auth",(function(){return I})),r.d(a,"users",(function(){return G}));var n=r(1),s=r.n(n),o=r(38),u=r.n(o),c=r(23),i=r(14),l=r(80),p=(r(52),r(8)),d=r(9),h=r(18),m=r(17),f=(r(53),r(41)),v=r(11),g=r(81),b=r(5),w=r.n(b),O=r(10),k=r(19),y=r.n(k),E=new(function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"login",value:function(){var e=Object(O.a)(w.a.mark((function e(t,r){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("j_username",encodeURI(t)),a.append("j_password",encodeURI(r)),e.prev=3,e.next=6,y()({url:"/auth",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a,withCredentials:!0});case 6:if(200!==(n=e.sent).status){e.next=11;break}return e.abrupt("return",{loggedIn:!0,error:"",status:n.status});case 11:return e.abrupt("return",{loggedIn:!1,error:n.error,status:n.status});case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",{status:e.t0.response.status,error:e.t0.response.statusText});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(O.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()({url:"/logout",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0});case 3:if(200!==(t=e.sent).status){e.next=8;break}return e.abrupt("return",{loggedIn:!0,error:"",status:t.status});case 8:return e.abrupt("return",{loggedIn:!1,error:"",status:t.status});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{status:e.t0.response.status,error:e.t0.response.statusText});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}()),j="auth.AUTH_ERROR",x="auth.SERVER_ERROR";var N={loggedIn:!1,username:void 0,error:""};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"auth.LOGGED_IN":return{loggedIn:!0,username:t.username,error:""};case"auth.LOGGING_IN":case"auth.LOGGED_OUT":return{loggedIn:!1,username:void 0,error:""};case j:return{loggedIn:!1,username:void 0,error:"Authentication Error"};case x:return{loggedIn:!1,username:void 0,error:"Server Error"};default:return e}}function C(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username,error:e.auth.error}}r(73);var S=new(function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"getUsers",value:function(){var e=Object(O.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()({url:"/graphql",method:"post",data:{query:"\n                        query {\n                          allUsers {\n                            id\n                            firstName\n                            lastName\n                            totalSpent\n                            maximumSpent\n                          }\n                        }                        \n                    "},withCredentials:!0});case 3:if(t=e.sent,console.log(t.data.data.users),200!==t.status){e.next=9;break}return e.abrupt("return",{users:t.data.data.allUsers,status:t.status});case 9:return e.abrupt("return",{loggedIn:!1,error:t.error,status:t.status});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{status:e.t0.response.status,error:e.t0.response.statusText});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()}]),e}()),L="users.LOADED";var _={users:[]};function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"users.LOADING":return{users:[]};case L:return{users:t.users};default:return e}}function U(e){return{users:e.users.users}}var D=r(82),T=r(79),R=r(15),A=r(43),H=(r(75),function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(e){var a;return Object(p.a)(this,r),(a=t.call(this,e)).handleLogout=a.handleLogout.bind(Object(v.a)(a)),a.props.dispatch(function(){var e=Object(O.a)(w.a.mark((function e(t,r){var a,n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"users.LOADING"}),e.next=3,S.getUsers();case 3:a=e.sent,n=a.users,s=a.status,e.t0=s,e.next=200===e.t0?9:401===e.t0?11:13;break;case 9:return t({type:L,users:n}),e.abrupt("break",14);case 11:return t({type:j,status:s}),e.abrupt("break",14);case 13:t({type:x,status:s});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),a}return Object(d.a)(r,[{key:"handleLogout",value:function(){this.props.dispatch(function(){var e=Object(O.a)(w.a.mark((function e(t,r){var a,n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.logout();case 2:a=e.sent,n=a.status,s=a.error,e.t0=n,e.next=200===e.t0?8:401===e.t0?10:12;break;case 8:return t({type:"auth.LOGGED_OUT",username:void 0}),e.abrupt("break",13);case 10:return t({type:j,status:n,error:s}),e.abrupt("break",13);case 12:t({type:x,status:n,error:s});case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"renderNavBar",value:function(){return s.a.createElement("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark sticky-top"},s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(g.a,{className:"nav-link",to:"/"},"Home"))),s.a.createElement("ul",{className:"navbar-nav ml-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.handleLogout},"Logout"))))}},{key:"render",value:function(){return!1===this.props.loggedIn?s.a.createElement(D.a,{to:"/login",push:!0}):s.a.createElement("div",null,this.renderNavBar(),s.a.createElement("h2",null,"Users"),s.a.createElement("div",null,s.a.createElement(A.a,{data:this.props.users,columns:[{Header:"ID",accessor:"id",width:100},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Total Spent",accessor:"totalSpent"},{Header:"Maximum",accessor:"maximumSpent"}],defaultPageSize:10,className:"-striped -highlight"})))}}]),r}(s.a.Component));var W=Object(T.a)(Object(R.a)((function(e){return{loggedIn:C(e).loggedIn,users:U(e).users}}))(H)),B=(r(77),function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(e){var a;return Object(p.a)(this,r),(a=t.call(this,e)).state={username:"",password:"",submitted:!1},a.usernameChange=a.usernameChange.bind(Object(v.a)(a)),a.passwordChange=a.passwordChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a}return Object(d.a)(r,[{key:"usernameChange",value:function(e){var t=e.target,r=(t.name,t.value);this.setState({username:r}),this.setState({submitted:!1})}},{key:"passwordChange",value:function(e){var t=e.target,r=(t.name,t.value);this.setState({password:r}),this.setState({submitted:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,r=t.username,a=t.password;this.props.dispatch(function(e,t){return function(){var r=Object(O.a)(w.a.mark((function r(a,n){var s,o,u;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"auth.LOGGING_IN"}),r.next=3,E.login(e,t);case 3:s=r.sent,o=s.status,u=s.error,r.t0=o,r.next=200===r.t0?9:401===r.t0?11:13;break;case 9:return a({type:"auth.LOGGED_IN",username:e}),r.abrupt("break",14);case 11:return a({type:j,status:o,error:u}),r.abrupt("break",14);case 13:a({type:x,status:o,error:u});case 14:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}(r,a))}},{key:"render",value:function(){return!0===this.props.loggedIn?s.a.createElement(D.a,{to:"/",push:!0}):s.a.createElement("div",{className:"wrapper"},s.a.createElement("form",{className:"form-signin",onSubmit:this.handleSubmit},s.a.createElement("h2",{className:"form-signin-heading"},"Please login"),s.a.createElement("input",{placeholder:"Use 'user1'",type:"text",name:"username",onChange:this.usernameChange,className:"form-control"}),s.a.createElement("input",{placeholder:"Use 'password123'",type:"password",name:"password",onChange:this.passwordChange,className:"form-control"}),s.a.createElement("hr",null),s.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Login")))}}]),r}(s.a.Component));var q=Object(T.a)(Object(R.a)((function(e){return C(e)}))(B)),P=function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(f.a,{exact:!0,path:"/",component:W}),s.a.createElement(f.a,{exact:!0,path:"/login",component:q}))}}]),r}(n.Component);var F=Object(T.a)(Object(c.b)((function(e){return{loggedIn:C(e).loggedIn}}))(P)),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var V=r(42),X=r.n(V),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Q=Object(i.e)(Object(i.c)(a),z(Object(i.a)(X.a)));u.a.render(s.a.createElement(c.a,{store:Q},s.a.createElement(l.a,null,s.a.createElement(F,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");J?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):M(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):M(e)}))}}()}},[[44,1,2]]]);
//# sourceMappingURL=main.1025fbfc.chunk.js.map